--// Services
local TweenService = game:GetService("TweenService")
local Players = game:GetService("Players")
local player = Players.LocalPlayer

--// GUI Setup
local gui = Instance.new("ScreenGui", player:WaitForChild("PlayerGui"))
gui.Name = "TradeFreezer"
gui.ResetOnSpawn = false

--// Main Frame
local main = Instance.new("Frame", gui)
main.Size = UDim2.new(0, 250, 0, 150)
main.Position = UDim2.new(0.35, 0, 0.4, 0)
main.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
main.BorderSizePixel = 0
main.Active = true
main.Draggable = false -- We'll handle dragging manually

-- Title Bar
local titleBar = Instance.new("TextLabel", main)
titleBar.Size = UDim2.new(1, 0, 0, 25)
titleBar.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
titleBar.Text = "Trade Freezer"
titleBar.TextColor3 = Color3.fromRGB(255, 255, 255)
titleBar.Font = Enum.Font.GothamBold
titleBar.TextSize = 14

-- Drag variables
local dragging = false
local dragStart, startPos

titleBar.InputBegan:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseButton1 then
		dragging = true
		dragStart = input.Position
		startPos = main.Position
	end
end)

titleBar.InputChanged:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseMovement and dragging then
		local delta = input.Position - dragStart
		local newPos = UDim2.new(
			startPos.X.Scale, startPos.X.Offset + delta.X,
			startPos.Y.Scale, startPos.Y.Offset + delta.Y
		)
		TweenService:Create(main, TweenInfo.new(0.15, Enum.EasingStyle.Sine, Enum.EasingDirection.Out), {Position = newPos}):Play()
	end
end)

titleBar.InputEnded:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseButton1 then
		dragging = false
	end
end)

-- Function to create toggle
local function createToggle(name, position)
	local btn = Instance.new("TextButton", main)
	btn.Size = UDim2.new(1, -10, 0, 25)
	btn.Position = position
	btn.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
	btn.Text = name
	btn.TextColor3 = Color3.fromRGB(255, 255, 255)
	btn.Font = Enum.Font.Gotham
	btn.TextSize = 14
	
	local indicator = Instance.new("Frame", btn)
	indicator.Size = UDim2.new(0, 5, 1, 0)
	indicator.Position = UDim2.new(0, 0, 0, 0)
	indicator.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
	indicator.Visible = false
	
	local state = false
	btn.MouseButton1Click:Connect(function()
		state = not state
		indicator.Visible = state
	end)
end

-- Example Toggles
createToggle("Generate", UDim2.new(0, 5, 0, 35))
createToggle("Option 2", UDim2.new(0, 5, 0, 65))
